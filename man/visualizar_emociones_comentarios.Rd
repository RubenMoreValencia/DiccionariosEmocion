% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/visualizacion_modelos.R
\name{visualizar_emociones_comentarios}
\alias{visualizar_emociones_comentarios}
\title{Visualizar resultados de emociones por comentario (PCA + barras)}
\usage{
visualizar_emociones_comentarios(
  pca,
  matriz_emocional,
  etiquetas,
  cols_emociones = NULL,
  componentes = c(1, 2),
  palette = NULL,
  biplot = TRUE,
  top_n_loadings = 10,
  barras_modo = c("total", "porcentaje"),
  titulo_base = "Emociones por comentario",
  label_max_overlaps = 200
)
}
\arguments{
\item{pca}{Objeto de clase \code{prcomp} (PCA ya calculado sobre emociones).}

\item{matriz_emocional}{\code{data.frame} con columnas numéricas de emociones y una
columna factor \code{cluster}. Puede contener además \code{positivo} y \code{negativo}.}

\item{etiquetas}{\code{character}. Vector de etiquetas textuales por comentario (mismo largo que filas).}

\item{cols_emociones}{\code{character} opcional. Nombres de columnas de emociones a graficar en PCA
(por defecto intenta detectar las 8 NRC: ira, anticipación, disgusto, miedo,
alegría, tristeza, sorpresa, confianza — en ES o EN).}

\item{componentes}{\code{integer} vector de longitud 2. Componentes a proyectar (por defecto \code{c(1,2)}).}

\item{palette}{\code{NULL} | nombre de paleta \pkg{ggplot2} (p.ej. "Dark2") | vector de colores.}

\item{biplot}{\code{logical}. Si \code{TRUE}, añade biplot con vectores de carga (solo si hay 2 componentes).}

\item{top_n_loadings}{\code{integer} o \code{NULL}. Número de variables con mayor norma de carga a etiquetar en biplot.
Por defecto \code{10}. Usa \code{NULL} para mostrar todas.}

\item{barras_modo}{\code{c("total","porcentaje")}. Modo del gráfico de barras agregadas (suma o \\%).}

\item{titulo_base}{\code{character}. Título base para los gráficos.}
}
\value{
Lista con:
\describe{
\item{pca}{Lista con \code{scatter}, \code{elipses} y (si aplica) \code{biplot}.}
\item{barras}{Objeto \code{ggplot2} con barras agregadas de emociones.}
\item{data_barras}{\code{data.frame} usado en las barras (útil para tablas/reportes).}
}
}
\description{
Descripción (auto). Completar con propósito, entradas y salidas.

Genera visualizaciones clave a partir de una matriz emocional por comentario:
(1) gráficos PCA (dispersión, elipses y biplot opcional) coloreados por \code{cluster},
con etiquetas de texto; (2) barras agrupadas/resumidas de las emociones.
}
\details{
El biplot escala automáticamente los vectores de carga al rango de los scores para
que ambos sean visibles en el mismo plano. El gráfico de barras resume las emociones
especificadas en \code{cols_emociones}; si existen \code{positivo} y \code{negativo}, se incluyen también.
}
\examples{
\dontrun{
# Asumiendo salida del pipeline:
out <- pipeline_emociones(comentarios, lexicon, k = 3, seed = 42)
viz <- visualizar_emociones_comentarios(
  pca = out$pca,
  matriz_emocional = out$matriz_emocional,
  etiquetas = rownames(out$matriz_emocional),
  cols_emociones = out$cols_emociones,   # las 8 NRC detectadas
  palette = "Dark2",
  biplot = TRUE,
  barras_modo = "porcentaje"
)
print(viz$pca$scatter)
print(viz$pca$elipses)
print(viz$pca$biplot)
print(viz$barras)
head(viz$data_barras)
}

}
