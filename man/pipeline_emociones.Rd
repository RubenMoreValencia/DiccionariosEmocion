% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/visualizacion_modelos.R
\name{pipeline_emociones}
\alias{pipeline_emociones}
\title{Pipeline completo de emociones: tokenización → resumen → PCA → clustering → gráficos}
\usage{
pipeline_emociones(
  comentarios = NULL,
  lista_tokens = NULL,
  lexicon,
  tokenizer = NULL,
  resumen_fun = c("sum", "mean"),
  k = 4,
  nstart = 20,
  seed = 123,
  na_action = c("omit", "zero", "fail"),
  columnas_map = NULL,
  hacer_graficos = TRUE,
  palette = NULL,
  top_n_loadings = 10
)
}
\arguments{
\item{comentarios}{\code{character} opcional. Vector de textos (uno por comentario).}

\item{lista_tokens}{\code{list} opcional. Lista de vectores de tokens por comentario.
Si se proveen ambos, se usa \code{lista_tokens}.}

\item{lexicon}{\code{data.frame} o \code{matrix}. Filas = tokens del diccionario (mismo idioma
que los tokens), columnas = emociones/polaridades (numéricas). Debe tener \code{rownames} con los tokens.}

\item{tokenizer}{\code{function} opcional. Función que convierte un texto en vector de tokens.
Por defecto se usa una tokenización básica robusta a acentos y puntuación.}

\item{resumen_fun}{\code{c("sum","mean")}. Cómo agregar emociones por comentario. Por defecto \code{"sum"}.}

\item{k}{\code{integer}. Número de clusters para k-means. Por defecto \code{4}.}

\item{nstart}{\code{integer}. Reintentos aleatorios del k-means. Por defecto \code{20}.}

\item{seed}{\code{NULL} o \code{integer}. Semilla para reproducibilidad. Por defecto \code{123}.}

\item{na_action}{\code{c("omit","zero","fail")}. Tratamiento de NA tras el resumen. Por defecto \code{"omit"}.}

\item{columnas_map}{\code{NULL} o \code{named list}. Mapeo flexible de nombres NRC/polaridades (regex).
Si \code{NULL}, se intenta detectar automáticamente en inglés y español.}

\item{hacer_graficos}{\code{logical}. Si \code{TRUE}, devuelve gráficos PCA (scatter, elipses y biplot). Por defecto \code{TRUE}.}

\item{palette}{\code{NULL}, nombre de paleta de \pkg{ggplot2} (p.ej. \code{"Dark2"}) o vector de colores para clusters.}

\item{top_n_loadings}{\code{NULL} o \code{integer}. En biplot, número de variables con mayores cargas a etiquetar. Por defecto \code{10}.}

\item{"mean"}{(auto) TODO: describir parámetro.}
}
\value{
Una \code{list} con:
\itemize{
\item \code{matriz_emocional}: \code{data.frame} con emociones/polaridades por comentario, cluster y emoción predominante.
\item \code{pca}, \code{proyeccion}, \code{cargas}, \code{var_exp}: resultados del PCA.
\item \code{clusters}: objeto \code{kmeans}.
\item \code{graficos}: lista con \code{scatter}, \code{elipses}, \code{biplot} (si \code{hacer_graficos=TRUE}).
\item \code{metricas}: lista con \code{oov_rate} (tokens fuera del diccionario) y conteos útiles.
\item \code{cols_emociones}: vector con los nombres de las columnas emocionales usadas (8 NRC).
}
}
\description{
Ejecuta un flujo completo de análisis emocional a partir de \strong{textos crudos} o de una
\strong{lista de tokens}, usando un \strong{lexicón} (filas = tokens, columnas = emociones/polaridades).
Incluye resumen por comentario, tratamiento de NA/columnas constantes, PCA (centrado/escalado),
k-means reproducible y gráficos (scatter, elipses y biplot), además de métricas de calidad (OOV).
}
\examples{
\dontrun{
# Usando tus objetos:
comentarios <- resultados$TextoSentencias
lexicon     <- as.data.frame(resultados$VectorTextoSentimientosNRC)  # filas=tokens

out <- pipeline_emociones(
  comentarios = comentarios,
  lexicon = lexicon,
  k = 3, resumen_fun = "sum", seed = 42,
  palette = "Dark2"
)

# Vistas:
head(out$matriz_emocional)
out$var_exp
print(out$graficos$scatter)
print(out$graficos$elipses)
print(out$graficos$biplot)
}
}
\seealso{
Other utilidades: 
\code{\link{DividirPorPercentiles}()},
\code{\link{GenerarDataframeT}()},
\code{\link{LimpiaTexto}()},
\code{\link{TabContingencia_MaxMinXFila}()},
\code{\link{TraduceA}()},
\code{\link{UnirExcelITFF_Optimizada}()},
\code{\link{agregar_recuento_filas}()},
\code{\link{agrupar_emociones}()},
\code{\link{ajustar_gradient_boosting}()},
\code{\link{ajustar_red_nn_unificada}()},
\code{\link{ajustar_regresion_multinomial}()},
\code{\link{ajustar_rnn_regresion}()},
\code{\link{ajustar_rnn_regresion_torch}()},
\code{\link{analizar_coherencia_metodos}()},
\code{\link{analizar_comentarios}()},
\code{\link{analizar_comentarios_ReEscalado}()},
\code{\link{analizar_comentarios_ReEscalado_general}()},
\code{\link{analizar_comentarios_ReEscalado_v3}()},
\code{\link{analizar_comentarios_XP}()},
\code{\link{analizar_consistencia_lexicos}()},
\code{\link{analizar_consistencia_lexicos_v2}()},
\code{\link{analizar_correlaciones_metodos}()},
\code{\link{analizar_emociones_texto}()},
\code{\link{analizar_percentiles_columna}()},
\code{\link{analizar_percentiles_columnaBinaria}()},
\code{\link{analizar_tokens_extremos}()},
\code{\link{anotar_tokens_idioma_simple}()},
\code{\link{as_df_safe}()},
\code{\link{build_emotion_indices}()},
\code{\link{calcular_ensamble_ponderado}()},
\code{\link{calcular_puntaje_emocional}()},
\code{\link{calibrar_metodo_referencia}()},
\code{\link{cambiar_nombres_columnas}()},
\code{\link{categorizar_indices}()},
\code{\link{categorizar_por_percentiles}()},
\code{\link{categorizar_por_percentiles_full}()},
\code{\link{cluster_emotion_spaces}()},
\code{\link{cluster_hclust_cut}()},
\code{\link{cluster_kmeans_auto}()},
\code{\link{configurar_openai_clave}()},
\code{\link{convertir_a_factores_arbol}()},
\code{\link{crear_diccionario_emociones}()},
\code{\link{eliminar_filas_repetidas}()},
\code{\link{eliminarduplicados}()},
\code{\link{emocion_mas_fuerte}()},
\code{\link{estrategia_p1_preparacion}()},
\code{\link{estrategia_p3_ensamble}()},
\code{\link{estrategia_p5_clusters}()},
\code{\link{extraer_features_emocionales}()},
\code{\link{filtrar_diccionario}()},
\code{\link{generar_reporte_html}()},
\code{\link{guardarDataFrameCSV}()},
\code{\link{interseccionDataFrames}()},
\code{\link{leerCSVConNombres}()},
\code{\link{mostrar_diccionario_emociones}()},
\code{\link{p7_exportar_reporte_maestro}()},
\code{\link{predecir_nivel_bin}()},
\code{\link{procesar_emociones_comentarios}()},
\code{\link{run_fa}()},
\code{\link{safe_write_csv}()},
\code{\link{segmentar_consistencia_lexicos}()},
\code{\link{simular_arbol}()},
\code{\link{simular_comparacion_todos}()},
\code{\link{simular_random_forest}()},
\code{\link{simular_red_neuronal}()},
\code{\link{simular_red_nn_unificada}()},
\code{\link{simular_regresion}()},
\code{\link{simular_regresion_multinomial}()},
\code{\link{simular_rnn_regresion}()},
\code{\link{simular_rnn_regresion_torch}()},
\code{\link{sp_save}()},
\code{\link{summarize_emotion_space}()},
\code{\link{vector_a_cadena}()},
\code{\link{verificar_clave_openai}()}
}
\concept{utilidades}
