% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/modelos_aprendizaje.R
\name{ajustar_modelo_arboles}
\alias{ajustar_modelo_arboles}
\title{Ajuste de modelos basados en árboles para clasificación de sentimiento}
\usage{
ajustar_modelo_arboles(
  datos,
  predictoras,
  clase,
  prop_test = 0.3,
  metodo = "arbol"
)
}
\arguments{
\item{datos}{\code{data.frame}. Datos a nivel token con las columnas de
\code{predictoras} y la columna objetivo \code{clase}.}

\item{predictoras}{\code{character}. Vector con los nombres de las columnas
predictoras a utilizar.}

\item{clase}{\code{character}. Nombre de la columna objetivo (se forzará a \code{factor}).}

\item{prop_test}{\code{numeric} en \code{(0,1)}. Proporción destinada a \code{TEST}
(el resto se usa para \code{TRAIN}). Por defecto \code{0.3}.}

\item{metodo}{\code{character}. Uno de \code{"arbol"} (usa \code{rpart}) o
\code{"rf"} (usa \code{randomForest}). Por defecto \code{"arbol"}.}
}
\value{
Una \code{list} con los elementos:
\code{modelo} (objeto del modelo entrenado),
\code{predicciones} (factor en \code{TEST}),
\code{probabilidades} (matriz o \code{NULL}, según método),
\code{matriz_confusion} (objeto \code{caret::confusionMatrix}),
\code{macro_f1}, \code{micro_f1}, \code{balanced_accuracy} (numéricos),
\code{roc_obj}, \code{pr_obj} (listas por clase; pueden contener \code{NULL}),
\code{tabla_metricas} (data frame por clase con métricas y AUCs).
}
\description{
Ajusta un modelo de árbol de decisión (\code{rpart}) o un bosque aleatorio
(\code{randomForest}) para clasificar una variable objetivo a partir de un
conjunto de predictores a nivel token. Divide los datos en \code{train/test}
según \code{prop_test}, entrena el modelo y calcula métricas por clase (F1,
Precision, Recall, Balanced Accuracy) y áreas bajo curva ROC y PR cuando es posible.
}
\details{
Argumento \code{metodo} admite \code{"arbol"} (vía \code{rpart}) o \code{"rf"}
(vía \code{randomForest}). Para \code{"arbol"} se grafica el árbol con
\code{rpart.plot}. Las probabilidades de clase se usan para estimar curvas
ROC/PR por clase cuando el método lo provee.

Paquetes requeridos en tiempo de ejecución según el método y métricas:
\code{rpart}, \code{rpart.plot}, \code{randomForest}, \code{caret},
\code{MLmetrics}, \code{pROC}, \code{PRROC}.
}
\examples{
\dontrun{
# Suponga que 'datos' contiene columnas de entrada y una columna objetivo 'Nivel_bin'
set.seed(123)
fit_res <- ajustar_modelo_arboles(
  datos       = datos,
  predictoras = c("anger","fear","joy","sadness","Nivel_syuzhet","Nivel_bing"),
  clase       = "Nivel_bin",
  prop_test   = 0.3,
  metodo      = "arbol"   # o "rf"
)
fit_res$tabla_metricas
}

}
\seealso{
\code{rpart}, \code{rpart.plot}, \code{randomForest},
\code{caret::createDataPartition}, \code{caret::confusionMatrix},
\code{pROC::roc}, \code{pROC::auc}, \code{PRROC::pr.curve}
}
