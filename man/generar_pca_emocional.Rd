% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/visualizacion_modelos.R
\name{generar_pca_emocional}
\alias{generar_pca_emocional}
\title{Generar PCA sobre matriz emocional}
\usage{
generar_pca_emocional(
  data_matriz,
  escalar = TRUE,
  center = TRUE,
  na_action = c("omit", "zero", "fail"),
  keep_row_names = TRUE
)
}
\arguments{
\item{data_matriz}{\code{data.frame} numérico con columnas de emociones
(p. ej., \code{ira}, \code{alegria}, \code{miedo}, ...).}

\item{escalar}{\code{logical}. Si \code{TRUE}, aplica escalado (equivale a \code{scale.=TRUE} en \code{prcomp}). Por defecto \code{TRUE}.}

\item{center}{\code{logical}. Si \code{TRUE}, centra los datos antes del escalado. Por defecto \code{TRUE}.}

\item{na_action}{\code{c("omit","zero","fail")}. Estrategia para tratar \code{NA}. Por defecto \code{"omit"}.}

\item{keep_row_names}{\code{logical}. Si \code{TRUE}, preserva \code{rownames} en la salida de \code{proyeccion}. Por defecto \code{TRUE}.}

\item{"zero"}{(auto) TODO: describir parámetro.}

\item{"fail"}{(auto) TODO: describir parámetro.}
}
\value{
Una \code{list} con:
\itemize{
\item \code{pca}: objeto \code{prcomp}.
\item \code{proyeccion}: \code{data.frame} con los scores (coordenadas PC) de cada fila usada.
\item \code{cargas}: \code{data.frame} con las cargas (loadings) por variable.
\item \code{var_exp}: \code{data.frame} con varianza explicada por componente (proporción y acumulada).
\item \code{escalado}: lista con \code{center} y \code{scale} usados por \code{prcomp}.
\item \code{cols_usadas}: vector con los nombres de columnas finalmente utilizadas.
\item \code{filas_usadas}: vector con los nombres/índices de filas incluidas tras el tratamiento de NA.
}
}
\description{
Realiza un Análisis de Componentes Principales (PCA) sobre una matriz de emociones
por comentario/documento. Incluye manejo de valores faltantes, eliminación de
columnas constantes, y devuelve la proyección (scores), cargas (loadings) y
varianza explicada.
}
\details{
\itemize{
\item Si hay \code{NA}, el argumento \code{na_action} controla el tratamiento:
\itemize{
\item \code{"omit"}: elimina filas con cualquier NA (comportamiento clásico).
\item \code{"zero"}: reemplaza NA por 0 (útil si los conteos/frecuencias ausentes se interpretan como 0).
\item \code{"fail"}: lanza error si existen \code{NA}.
}
\item Columnas con varianza 0 (constantes) se eliminan para evitar fallos en \code{prcomp()}.
\item El centrado/escalado se controla con \code{center} y \code{scale.} (alias \code{escalar}).
}
}
\examples{
\dontrun{
# 1) Con una matriz emocional ya curada (solo emociones NRC)
emo_cols <- c("ira","anticipación","disgusto","miedo","alegría","tristeza","sorpresa","confianza")
acdfx_emoc <- acdfx[, emo_cols]
res_pca <- generar_pca_emocional(acdfx_emoc, escalar = TRUE, center = TRUE, na_action = "omit")
head(res_pca$proyeccion)
res_pca$var_exp

# 2) Integración con tus funciones de gráfico
g <- graficar_pca_emociones_etiquetas(
  pca = res_pca$pca,
  data = acdfx_emoc,
  labels_cluster = acdfx$categoria,
  labels_texto = rownames(acdfx_emoc),
  palette = "Dark2",
  top_n_loadings = 10,
  biplot = TRUE
)
print(g$scatter); print(g$elipses); print(g$cargas); print(g$biplot)

# 3) NA como 0 (si ausencias significan ausencia de emoción)
res_pca0 <- generar_pca_emocional(acdfx_emoc, na_action = "zero")
}

}
\seealso{
Other reduccion_dimensional: 
\code{\link{ajustar_pca_svm}()},
\code{\link{estrategia_p4_pca_cluster}()},
\code{\link{graficar_pca_emociones}()},
\code{\link{graficar_pca_emociones_etiquetas}()},
\code{\link{pca_tokens_biplot}()},
\code{\link{pca_tokens_plot}()},
\code{\link{resModeloPCA}()},
\code{\link{run_pca}()},
\code{\link{simular_pca_svm}()}
}
\concept{reduccion_dimensional}
